{"version":3,"sources":["../../src/services/create-pages-statefully.ts"],"names":["createPagesStatefully","parentSpan","gatsbyNodeGraphQLFunction","activity","reporter","activityTimer","start","graphql","traceId","waitForCascadingActions","span","end"],"mappings":";;;;;;;AAAA;;AACA;;AAGO,eAAeA,qBAAf,CAAqC;AAC1CC,EAAAA,UAD0C;AAE1CC,EAAAA;AAF0C,CAArC,EAGuC;AAC5C;AACA;AACA;AACA;AACA,QAAMC,QAAQ,GAAGC,kBAASC,aAAT,CAAwB,uBAAxB,EAAgD;AAC/DJ,IAAAA;AAD+D,GAAhD,CAAjB;;AAGAE,EAAAA,QAAQ,CAACG,KAAT;AACA,QAAM,4BACH,uBADG,EAEJ;AACEC,IAAAA,OAAO,EAAEL,yBADX;AAEEM,IAAAA,OAAO,EAAG,+BAFZ;AAGEC,IAAAA,uBAAuB,EAAE,IAH3B;AAIER,IAAAA,UAAU,EAAEE,QAAQ,CAACO,IAJvB,CAKE;;AALF,GAFI,EASJ;AACEP,IAAAA;AADF,GATI,CAAN;AAaAA,EAAAA,QAAQ,CAACQ,GAAT;AACD","sourcesContent":["import reporter from \"gatsby-cli/lib/reporter\"\nimport apiRunnerNode from \"../utils/api-runner-node\"\nimport { IDataLayerContext } from \"../state-machines/data-layer/types\"\n\nexport async function createPagesStatefully({\n  parentSpan,\n  gatsbyNodeGraphQLFunction,\n}: Partial<IDataLayerContext>): Promise<void> {\n  // A variant on createPages for plugins that want to\n  // have full control over adding/removing pages. The normal\n  // \"createPages\" API is called every time (during development)\n  // that data changes.\n  const activity = reporter.activityTimer(`createPagesStatefully`, {\n    parentSpan,\n  })\n  activity.start()\n  await apiRunnerNode(\n    `createPagesStatefully`,\n    {\n      graphql: gatsbyNodeGraphQLFunction,\n      traceId: `initial-createPagesStatefully`,\n      waitForCascadingActions: true,\n      parentSpan: activity.span,\n      // deferNodeMutation: true, //later\n    },\n    {\n      activity,\n    }\n  )\n  activity.end()\n}\n"],"file":"create-pages-statefully.js"}